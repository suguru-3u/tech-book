# 概要

このページは、SQLアンチパターンの不適切なキーについて記述しています。

# 不適切なキーとは何か？

主キー、外部キーなどデータベースの機能で設定されるもの、テーブルの結合条件で使用される列（結合キー）に不適切なデータ型を設定することを不適切なキーといいます。

この2種類のグループは、互いに重なり合っていることがほとんどです。<br>
結合で使われるキーというのは、当該テーブルの主キーや外部キーであるのが普通です。

この二つの用途で使われる列には、明らかに使ってはいけないデータ型があります。

それが、可変長文字列（VARCHAR）です。理由は、二つあります。

一つは、可変長文字列の列は、キーが満たすべき条件である不変性（Stability）を備えていないこと。

そして、もう一つが、固定長文字列（CHAR）との混同です。

## さらに特徴

可変長文字列（VARCHAR）と 固定長文字列（CHAR）では比較した際にアンマッチになってしまいます。

そのため、適切にDBを使用できずSQLやアプリケーション側で対応する必要が出てきます。

なので、人の名前やなど将来的に可変に変わる可能性があるものは、キーに使用しない方が良いです。

